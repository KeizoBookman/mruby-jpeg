assert('JPEG decompress file') do
  jpg = JPEG::decompress_file(TEST_ARGS['test_jpeg'])
  jpg.height == 3000 && jpg.width == 3000
end

assert('JPEG decompress memory') do
  simple_jpg="\xFF\xD8\xFF\xE0\x00\x10\x4A\x46\x49\x46\x00\x01\x01\x01\x00\x48\x00\x48\x00\x00\xFF\xDB\x00\x43\x00\x35\x25\x28\x2F\x28\x21\x35\x2F\x2B\x2F\x3C\x39\x35\x3F\x50\x85\x57\x50\x49\x49\x50\xA3\x75\x7B\x61\x85\xC1\xAA\xCB\xC8\xBE\xAA\xBA\xB7\xD5\xF0\xFF\xFF\xD5\xE2\xFF\xE6\xB7\xBA\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xCE\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xC0\x00\x0B\x08\x00\x84\x00\x84\x01\x01\x11\x00\xFF\xC4\x00\x16\x00\x01\x01\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x05\x04\xFF\xC4\x00\x26\x10\x00\x01\x03\x01\x09\x01\x00\x03\x01\x00\x00\x00\x00\x00\x00\x00\x00\x04\x11\x12\x14\x05\x15\x22\x41\x43\x63\x82\xA2\xE1\xC1\x13\x35\x51\x91\xFF\xDA\x00\x08\x01\x01\x00\x00\x3F\x00\xA6\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x84\x8D\x1D\x54\xF1\xC2\x2D\x93\xBB\x9A\xAE\x8D\xFE\x9E\x8B\xA3\x7F\xA7\xA2\xC6\xD6\xE3\xF4\xCA\xB1\x65\x54\x30\x42\x2F\x9B\xBB\x9A\xAD\x9D\x1E\x5F\x0D\x48\xD1\xD2\xCF\x1C\xE4\xD9\x33\x31\x2D\x1A\x3A\xA9\xE3\x84\x5B\x27\x77\x35\x5D\x1B\xFD\x3D\x17\x46\xFF\x00\x4F\x45\x8D\xAD\xC7\xE9\x4C\x00\x01\x32\xC6\xD6\xE3\xF4\x98\x53\xB1\xB5\xB8\xFD\x16\x36\xB7\x1F\xA6\x55\x88\xE9\x61\x8E\x72\x7C\x99\x98\xA8\xB1\x65\x2C\x30\x4E\x4F\x9B\x33\x04\x68\xE9\x67\x8E\x72\x6C\x99\x98\xCB\x63\x6B\x71\xFA\x4C\x29\xD8\xDA\xDC\x7E\x8B\x1B\x5B\x8F\xD2\x98\x00\x02\x65\x8D\xAD\xC7\xE8\xBA\x37\xFA\x7A\x6A\x46\x8E\x96\x78\xE7\x26\xC9\x99\x8C\xB6\x36\xB7\x1F\xA2\xC6\xD6\xE3\xF4\xD4\xB1\x65\x2C\x30\x4E\x4F\x9B\x33\x19\x6C\x6D\x6E\x3F\x45\x8D\xAD\xC7\xE8\xBA\x37\xFA\x7A\x6A\x46\x8E\x96\x78\xE7\x26\xC9\x99\x8C\xB6\x36\xB7\x1F\xA5\x30\x00\x04\xCB\xA3\x7F\xA7\xA2\xE8\xDF\xE9\xE8\xBA\x37\xFA\x7A\x6A\x46\x8E\x96\x78\xE7\x26\xC9\x99\x89\x68\xD6\x52\xCF\x04\xE4\xD9\xB3\x30\x46\xB2\x96\x78\x27\x26\xCD\x99\x8D\x56\x36\xB7\x1F\xA2\xE8\xDF\xE9\xE8\xBA\x37\xFA\x7A\x2E\x8D\xFE\x9E\x9A\x91\xA3\xA5\x9E\x39\xC9\xB2\x66\x63\x48\x00\x02\x65\xD1\xBF\xD3\xD1\x6C\xE8\xF2\xF8\x6A\x46\xB2\xAA\x78\x21\x16\xCD\xDD\xCC\xB7\x46\xFF\x00\x4F\x45\xB3\xA3\xCB\xE0\xFD\x56\xEF\xE5\xE2\xCD\xFE\xFF\x00\x4A\x64\xCB\xA3\x7F\xA7\xA6\x54\x6B\x29\x67\x82\x72\x6C\xD9\x98\x2C\x47\x4B\x0C\x73\x93\xE4\xCC\xC5\xD0\x00\x00\x84\x8D\x65\x2C\xF0\x4E\x4D\x9B\x33\x19\x8B\xAB\x16\x52\xC3\x04\xE4\xF9\xB3\x31\x96\xE8\xDF\xE9\xE8\xBD\xF6\x3B\xF8\x6A\x58\xB2\x96\x18\x27\x27\xCD\x99\x89\x6B\x11\xD2\xC3\x1C\xE4\xF9\x33\x31\xAA\xC6\xD6\xE3\xF4\x5E\xFB\x1D\xFC\x29\x93\x2C\x6D\x6E\x3F\x4A\x60\x00\x0C\xCB\x11\xD5\x43\x1C\x22\xF9\x3B\xB9\x96\xE8\xDF\xE9\xE8\xBA\x37\xFA\x7A\x2E\x8D\xFE\x9E\x8B\xDF\x63\xBF\x82\xC6\xD6\xE3\xF4\xCA\xB1\x65\x54\x30\x42\x2F\x9B\xBB\x97\x49\x9F\xAA\xDD\xFC\xBC\x59\xBF\xDF\xE9\xA9\x1A\x3A\x59\xE3\x9C\x9B\x26\x66\x08\xD1\xD2\xCF\x1C\xE4\xD9\x33\x31\xA4\x00\x01\x09\x1A\x3A\xA9\xE3\x84\x5B\x27\x77\x35\x5D\x1B\xFD\x3D\x17\x46\xFF\x00\x4F\x45\x8D\xAD\xC7\xE9\xA9\x1A\x3A\x59\xE3\x9C\x9B\x26\x66\x25\xAC\x47\x4B\x0C\x73\x93\xE4\xCC\xC1\x62\x3A\x58\x63\x9C\x9F\x26\x66\x2A\x2C\x59\x4B\x0C\x13\x93\xE6\xCC\xC4\xB4\x6B\x29\x67\x82\x72\x6C\xD9\x98\xA8\xB1\x1D\x54\x31\xC2\x2F\x93\xBB\x9A\x40\x00\x02\x65\x8D\xAD\xC7\xE9\x30\xA7\x63\x6B\x71\xFA\x2C\x6D\x6E\x3F\x4C\xAB\x16\x55\x43\x04\x22\xF9\xBB\xB8\x46\xB2\x96\x78\x27\x26\xCD\x99\x8A\x88\xD6\x55\x4F\x04\x22\xD9\xBB\xB8\x46\xB2\xAA\x78\x21\x16\xCD\xDD\xC2\x35\x95\x53\xC1\x08\xB6\x6E\xEE\x16\x2C\xA5\x86\x09\xC9\xF3\x66\x60\x8D\x65\x54\xF0\x42\x2D\x9B\xBB\x9A\x40\x00\x13\x2C\x6D\x6E\x3F\x45\xD1\xBF\xD3\xD3\x52\x34\x74\xB3\xC7\x39\x36\x4C\xCC\x65\xB1\xB5\xB8\xFD\x1F\xB5\xDA\xFC\x5C\x9D\xFF\x00\xCF\xE1\x4C\x99\x63\x6B\x71\xFA\x53\x21\x23\x59\x4B\x3C\x13\x93\x66\xCC\xC5\x44\x68\xE9\x67\x8E\x72\x6C\x99\x98\x23\x47\x4B\x3C\x73\x93\x64\xCC\xC6\x90\x00\x04\xCB\xA3\x7F\xA7\xA2\xE8\xDF\xE9\xE8\xBA\x37\xFA\x7A\x6A\x46\x8E\x96\x78\xE7\x26\xC9\x99\x82\x34\x74\xB3\xC7\x39\x36\x4C\xCC\x69\x26\x5D\x1B\xFD\x3D\x35\x23\x47\x4B\x3C\x73\x93\x64\xCC\xC1\x1A\x3A\x59\xE3\x9C\x9B\x26\x66\x0B\x11\xD5\x43\x1C\x22\xF9\x3B\xB9\xA4\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x3F\xFF\xD9"
  jpg = JPEG::decompress_data(simple_jpg)
  jpg.height == 132 && jpg.width == 132
end
